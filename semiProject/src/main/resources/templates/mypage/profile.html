<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>프로필 관리</title>
  <link rel="stylesheet" href="/css/common/header.css" />
  <link rel="stylesheet" href="/css/mypage/sidebar.css">
  <link rel="stylesheet" href="/css/mypage/profile.css">

  <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
</head>
<body>

  <th:block th:replace="~{common/header :: header}"></th:block>

  <div class="mypage-container">
    
    <th:block th:replace="~{mypage/sidebar(menu='profile')}"></th:block>

    <main class="main-content">
      <h2>프로필 관리</h2>

      <form th:action="@{/mypage/update}" method="post" 
        enctype="multipart/form-data" th:object="${session.loginMember}" id="profileFrm">
        
        <div class="profile-img-area">
          <label for="profileImgInput">
            <img th:src="*{profileImg != null} ? *{profileImg} : '/images/default_profile.png'" 
                 id="profilePreview" alt="프로필 이미지">
            <div class="edit-icon">📷</div>
          </label>
          <input type="file" id="profileImgInput" name="uploadFile" accept="image/*" style="display: none;">
        </div>

<div class="form-group">
          <label>닉네임</label>
          <input type="text" name="memberNickname" th:value="*{memberNickname}" readonly>
        </div>

        <div class="form-group">
          <label>이름</label>
          <input type="text" name="memberName" th:value="*{memberName}" readonly>
        </div>

        <div class="form-group">
          <label>아이디</label>
          <input type="text" name="memberId" th:value="*{memberId}" readonly>
        </div>

        <div class="form-group">
          <label>이메일</label>
          <input type="email" name="memberEmail" th:value="*{memberEmail}" readonly>
        </div>

        <div class="form-group">
          <label>전화번호</label>
          <input type="text" name="memberTel" id="memberTel" 
                th:value="*{memberTel}" 
                placeholder="(- 없이 숫자만 입력)" maxlength="11">
        </div>

        <div class="form-group address-group">
          <label>주소</label>
          
          <div class="address-row">
            <input type="text" id="postcode" name="postcode" placeholder="우편번호" readonly 
                   th:value="${postcode}">
            <button type="button" id="searchAddressBtn" class="btn-dark">검색</button>
          </div>

          <input type="text" id="address" name="address" placeholder="기본 주소" readonly 
                 th:value="${address}">

          <input type="text" id="detailAddress" name="detailAddress" placeholder="상세 주소" 
                 th:value="${detailAddress}">
        </div>

        <div class="btn-area">
          <button type="submit" class="btn-submit">변경</button>
        </div>

      </form>
    </main>
  </div>

  <th:block th:replace="~{common/footer}"></th:block>

  <script src="/js/mypage/profile.js"></script>

</body>
</html>