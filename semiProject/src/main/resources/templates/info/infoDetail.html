<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${info != null ? info.progrmNm : '봉사 참여 정보'}">봉사 참여 정보</title>

    <link rel="stylesheet" th:href="@{/css/info/infoList.css}">
    <link rel="stylesheet" th:href="@{/css/info/infoDetail.css}">

    <script type="text/javascript" 
            src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=a81b56581a59372377c7388b669c6169&libraries=services&autoload=false"></script>
    
    <script src="https://kit.fontawesome.com/c0777c617e.js" crossorigin="anonymous"></script>
</head>

<body>
    <th:block th:replace="~{common/header}"></th:block>

    <main class="info-detail-container" th:if="${info != null}">
        <div class="detail-header">
            <h1 class="program-title" th:text="${info.progrmNm}">봉사 프로그램 명칭</h1>
            </div>

        <div class="map-section">
            <div class="section-title-container">
                <h3 class="section-title">📍 활동 장소</h3>
                
                <div class="scrap-area">
                    <button id="scrapBtn" 
                            th:if="${session.loginMember != null}" 
                            th:classappend="${info.scrapCheck == 1} ? 'scrapped' : ''"
                            th:data-infono="${info.infoBoardNo}">
                        <i th:class="${info.scrapCheck == 1} ? 'fa-solid fa-star' : 'fa-regular fa-star'"></i>
                    </button>
                </div>
            </div>

            <div id="map"></div>
            <p class="address-display">
                <b>주소:</b>
                <span id="targetAddr" th:text="${info.actPlace}">주소 데이터</span>
            </p>
            <div class="hidden-data">
                <span id="targetSido" th:text="${info.schSido}">시도</span>
                <span id="targetSign" th:text="${info.schSign}">시군구</span>
                <span id="targetOrg" th:text="${info.nanmmByNm}">기관명</span>
            </div>
        </div>

        <table class="detail-info-table">
            <colgroup>
                <col class="label-col"><col class="content-col">
                <col class="label-col"><col class="content-col">
            </colgroup>
            <tbody>
                <tr>
                    <th>봉사분야</th>
                    <td th:text="${info.actRm}">분야</td>
                    <th>모집인원</th>
                    <td class="emp-text" th:text="|${info.rcritNmpr} 명|">인원</td>
                </tr>
                <tr>
                    <th>등록기관</th>
                    <td th:text="${info.nanmmByNm}">기관명</td>
                    <th>봉사시간</th>
                    <td th:text="|${info.actBeginTm}시 ~ ${info.actEndTm}시|">시간</td>
                </tr>
                <tr>
                    <th>모집기간</th>
                    <td th:text="|${info.noticeBgnDe} ~ ${info.noticeEndDe}|">모집일</td>
                    <th>봉사기간</th>
                    <td th:text="|${info.progrmBgnde} ~ ${info.progrmEndde}|">봉사일</td>
                </tr>
            </tbody>
        </table>

        <div class="content-box">
            <h3 class="section-title">📋 활동 상세 안내</h3>
            <div class="content-text" th:utext="${info.progrmCn}">상세 내용</div>
        </div>

        <div class="action-bar">
            <button type="button" class="btn-list" onclick="history.back()">목록으로</button>
            <button type="button" class="btn-apply" id="applyBtn" th:data-url="${info.url}">신청하기</button>
        </div>
    </main>

    <th:block th:replace="~{common/footer}"></th:block>

    <script th:inline="javascript">
        const loginMemberNo = /*[[${session.loginMember?.memberNo}]]*/ null;
    </script>
    <script th:src="@{/js/info/infoDetail.js}"></script>
</body>
</html>