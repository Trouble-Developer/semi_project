<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>비밀번호 찾기</title>
  
  <!-- CSS 파일 연결 -->
  <link rel="stylesheet" href="/css/member/findPw.css">
</head>
<body>

  <main>
    <!-- ===== 공통 헤더 영역 (Thymeleaf 조각 사용) ===== -->
    <th:block th:replace="~{common/header}"></th:block>

    <!-- ===== 비밀번호 찾기 메인 영역 ===== -->
    <section class="findPw-content">
      
      <!-- 페이지 제목 -->
      <h1>비밀번호 찾기</h1>

      <!-- 입력 폼 영역 -->
      <div class="find-form">
        
        <!-- ========================================
             [아이디 찾기와의 차이점 1]
             아이디 입력 필드 추가!
             ======================================== -->
        
        <!-- ========== 1. 아이디 입력 ========== -->
        <div class="input-group">
          <label for="memberId">아이디</label>
          <!-- 
            - 비밀번호 찾기에서는 아이디를 알고 있어야 함
            - 아이디 찾기 페이지와의 가장 큰 차이점!
            - maxlength="20": DB의 VARCHAR2(20)에 맞춤
          -->
          <input type="text" name="memberId" id="memberId" 
                 placeholder="가입 시 등록한 아이디 입력" 
                 maxlength="20" 
                 autocomplete="off">
          
          <!-- 에러 메시지 표시 영역 -->
          <span class="error-msg" id="idMessage"></span>
        </div>

        <!-- ========== 2. 이름 입력 ========== -->
        <div class="input-group">
          <label for="memberName">이름</label>
          <!-- 
            - 아이디 찾기와 동일
            - 회원 본인 확인용
          -->
          <input type="text" name="memberName" id="memberName" 
                 placeholder="이름 입력 (한글 2글자 이상)" 
                 maxlength="10" 
                 autocomplete="off">
          
          <!-- 에러 메시지 표시 영역 -->
          <span class="error-msg" id="nameMessage"></span>
        </div>

        <!-- ========== 4. 이메일 입력 ========== -->
        <div class="input-group">
          <label for="memberEmail">이메일</label>
          
          <!-- 
            이메일 입력칸과 인증번호 발송 버튼을 한 줄에 배치
            flex-row 클래스로 가로 정렬
          -->
          <div class="flex-row">
            <!-- 이메일 입력칸 -->
            <input type="text" name="memberEmail" id="memberEmail" 
                   placeholder="가입 시 등록한 이메일 입력" 
                   maxlength="30" 
                   autocomplete="off">
            
            <!-- 
              인증번호 발송 버튼
              - type="button": form 제출 방지 (AJAX로 처리)
              - class="btn-orange-solid": 주황색 강조 버튼 스타일
            -->
            <button type="button" class="btn-orange-solid" id="sendAuthKeyBtn">
              인증번호 발송
            </button>
          </div>
          
          <!-- 에러 메시지 표시 영역 -->
          <span class="error-msg" id="emailMessage"></span>
        </div>

        <!-- ========== 5. 인증번호 입력 ========== -->
        <div class="input-group">
          <label for="authKey">인증번호</label>
          
          <!-- 인증번호 입력칸과 확인 버튼을 한 줄에 배치 -->
          <div class="flex-row">
            <!-- 인증번호 입력칸 (6자리) -->
            <input type="text" name="authKey" id="authKey" 
                   placeholder="인증번호 6자리 입력" 
                   maxlength="6" 
                   autocomplete="off">
            
            <!-- 
              확인 버튼
              - 클릭 시 회원 정보 확인 + 비밀번호 재설정 영역 표시
            -->
            <button type="button" class="btn-sub" id="checkAuthKeyBtn">
              확인
            </button>
          </div>
          
          <!-- 
            에러/성공 메시지 표시 영역
            타이머도 여기에 표시됨 (예: "04:59")
          -->
          <span class="error-msg" id="authKeyMessage"></span>
        </div>

        <!-- ========================================
             [아이디 찾기와의 차이점 2]
             결과 영역: 아이디 표시 → 비밀번호 재설정 폼
             ======================================== -->

        <!-- ========== 6. 비밀번호 재설정 영역 ========== -->
        <!-- 
          처음엔 숨김 (style="display: none;")
          인증 완료하면 JavaScript에서 보여줌
        -->
        <div class="result-area" id="resultArea" style="display: none;">
          
          <!-- 안내 문구 -->
          <div class="result-box">
            <p class="result-title">새로운 비밀번호를 입력해주세요</p>
          </div>

          <!-- 
            [비밀번호 재설정 폼]
            여기가 아이디 찾기와 완전히 다른 부분!
          -->
          
          <!-- 새 비밀번호 입력 -->
          <div class="input-group">
            <label for="newPw">새 비밀번호</label>
            <!-- 
              type="password": 입력값 숨김 처리
              비밀번호 규칙: 영문 대/소문자, 숫자, 특수문자 포함 8~20자
            -->
            <input type="password" name="newPw" id="newPw" 
                   placeholder="영문, 숫자, 특수문자 포함 6~20자" 
                   maxlength="20" 
                   autocomplete="off">
            
            <!-- 비밀번호 유효성 검사 메시지 -->
            <span class="error-msg" id="newPwMessage"></span>
          </div>

          <!-- 새 비밀번호 확인 -->
          <div class="input-group">
            <label for="newPwConfirm">새 비밀번호 확인</label>
            <!-- 
              위에서 입력한 비밀번호와 일치하는지 확인
              일치해야만 비밀번호 변경 가능
            -->
            <input type="password" name="newPwConfirm" id="newPwConfirm" 
                   placeholder="비밀번호 재입력" 
                   maxlength="20" 
                   autocomplete="off">
            
            <!-- 비밀번호 일치 여부 메시지 -->
            <span class="error-msg" id="newPwConfirmMessage"></span>
          </div>

          <!-- 
            [비밀번호 변경 버튼]
            클릭 시 서버로 AJAX 요청 → 비밀번호 UPDATE
          -->
          <div class="btn-area">
            <button type="button" class="btn-submit" id="resetPwBtn">
              비밀번호 변경
            </button>
          </div>

        </div>
        <!-- 결과 영역 끝 -->

      </div>
      <!-- 입력 폼 영역 끝 -->

    </section>
    <!-- 메인 영역 끝 -->

  </main>
    <!-- ===== 공통 푸터 영역 (Thymeleaf 조각 사용) ===== -->
    <th:block th:replace="~{common/footer}"></th:block>
  <!-- 
    JavaScript 파일 연결 (맨 마지막에 로드)
    HTML이 모두 로드된 후 JavaScript 실행
  -->
  <script src="/js/member/findPw.js"></script>
</body>
</html>