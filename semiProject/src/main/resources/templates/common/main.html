<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="/css/common/main.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.css"
    />
    <style>
      html,
      body {
        position: relative;
        height: 100%;
      }

      swiper-container {
        width: 100%;
        max-width: 1200px;
        height: 450px;
        margin: 40px auto;
      }

      swiper-slide {
        display: flex;
        flex-direction: column;
        overflow: hidden;
        border-radius: 20px;
        border: 1px solid #ddd;
        background-color: white;
        box-shadow: 0px 8px 6px -6px #666;
      }

      swiper-container {
        width: 100%;
        height: 400px;
        margin: 20px auto;
      }

      .append-buttons {
        text-align: center;
        margin-top: 20px;
      }

      .append-buttons button {
        display: inline-block;
        cursor: pointer;
        border: 1px solid #007aff;
        color: #007aff;
        text-decoration: none;
        padding: 4px 10px;
        border-radius: 4px;
        margin: 0 10px;
        font-size: 13px;
      }
      .swiper-content {
        display: flex;
        flex-direction: column;
      }
      .bg {
        width: 100%;
        height: 250px;
        border-top-left-radius: 20px;
        border-top-right-radius: 20px;
      }
      .text-info {
        padding: 0px 20px;
      }
      #volunteer-title-text {
        font-size: 25px;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <th:block th:replace="~{common/header}"></th:block>
    <div id="container">
      <img src="images/mainLogo.jpg" alt="ë©”ì¸ë¡œê³ " id="mainLogoImg" />
      <div>
        <section class="board-grid">
          <article class="board-section">
            <div class="section-header">
              <h3>
                ììœ ê²Œì‹œíŒ
                <i class="fa-solid fa-fire" style="color: #ff4d4d"></i>
              </h3>
              <a href="/board/1" class="more-btn">ë”ë³´ê¸°</a>
            </div>
            <th:block
              th:each="freeBoard, iterStatus : ${freeBoardList}"
              th:object="${freeBoard}"
            >
              <ul class="board-list">
                <li>
                  <span class="rank" th:text="${iterStatus.count}">ìˆœìœ„</span>
                  <a
                    th:href="@{/board/{boardCode}/{boardNo}(boardCode=*{boardCode}, boardNo=*{boardNo})}"
                    th:text="*{boardTitle}"
                    >ììœ ê²Œì‹œíŒ ì œëª©</a
                  >
                  <span class="info hot" th:text="*{likeCount}">ì¢‹ì•„ìš” ìˆ˜</span>
                </li>
              </ul>
            </th:block>
          </article>

          <article class="board-section">
            <div class="section-header">
              <h3>
                ì •ë³´ê²Œì‹œíŒ
                <i class="fa-solid fa-chart-line" style="color: #4dabf7"></i>
              </h3>
              <a href="/board/2" class="more-btn">ë”ë³´ê¸°</a>
            </div>
            <ul class="board-list">
              <li>
                <a href="#">[í•„ë…] 2025ë…„ ë´‰ì‚¬ ì‹œê°„ ê´€ë¦¬ë²•</a>
                <span class="info views"
                  ><i class="fa-solid fa-eye"></i> 2.1k</span
                >
              </li>
              <li>
                <a href="#">ìš°ìˆ˜ ë´‰ì‚¬ì í˜œíƒ ì´ì •ë¦¬</a>
                <span class="info views"
                  ><i class="fa-solid fa-eye"></i> 1.8k</span
                >
              </li>
              <li>
                <a href="#">ê²¨ìš¸ì²  ì•¼ì™¸ ë´‰ì‚¬ ì£¼ì˜ì‚¬í•­</a>
                <span class="info views"
                  ><i class="fa-solid fa-eye"></i> 1.5k</span
                >
              </li>
              <li>
                <a href="#">VMSì™€ 1365 ì—°ë™í•˜ëŠ” ë°©ë²•</a>
                <span class="info views"
                  ><i class="fa-solid fa-eye"></i> 1.2k</span
                >
              </li>
            </ul>
          </article>

          <article class="board-section">
            <div class="section-header">
              <h3>
                ê³µì§€ì‚¬í•­
                <i class="fa-solid fa-chart-line" style="color: #4dabf7"></i>
              </h3>
              <a href="/board/4" class="more-btn">ë”ë³´ê¸°</a>
            </div>
            <th:block
              th:each="noticeBoard : ${noticeBoardList}"
              th:object="${noticeBoard}"
            >
              <ul class="board-list">
                <li>
                  <a
                    th:href="@{/board/{boardCode}/{boardNo}(boardCode=*{boardCode}, boardNo=*{boardNo})}"
                    th:text="*{boardTitle}"
                    >ê³µì§€ì‚¬í•­ ì œëª©</a
                  >
                  <span class="info views" th:text="*{readCount}">ì¡°íšŒìˆ˜</span>
                </li>
              </ul>
            </th:block>
          </article>
        </section>

        <section
          class="volunteer-king-section"
          th:if="${reviewBestUser != null}"
        >
          <div class="king-card">
            <div class="king-badge">ì´ë‹¬ì˜ ë´‰ì‚¬ì™• ğŸ†</div>
            <div class="king-content">
              <div class="king-profile">
                <img
                  th:src="${reviewBestUser.profileImg != null and reviewBestUser.profileImg != '' 
                             ? reviewBestUser.profileImg 
                             : '/images/default_profile.png'}"
                  alt="ë´‰ì‚¬ì™• í”„ë¡œí•„"
                />
              </div>
              <div class="king-info">
                <h4>
                  ë´‰ì‚¬ë§ˆìŠ¤í„°
                  <span th:text="|(${reviewBestUser.memberNickname} ë‹˜)|"
                    >(ìœ ì € ì´ë¦„)</span
                  >
                </h4>
                <p>
                  ì´ë²ˆ ë‹¬ ì´
                  <strong th:text="${reviewBestUser.postCount}">0</strong>íšŒì˜
                  ë”°ëœ»í•œ ë´‰ì‚¬ í›„ê¸°ë¥¼ ê³µìœ í•´ ì£¼ì…¨ìŠµë‹ˆë‹¤!
                </p>
              </div>
            </div>
          </div>
        </section>

        <section
          class="volunteer-king-section"
          th:if="${reviewBestUser == null}"
          style="
            text-align: center;
            padding: 30px;
            background: #f9f9f9;
            border-radius: 20px;
          "
        >
          <p>ì•„ì§ ì´ë²ˆ ë‹¬ ë´‰ì‚¬ì™•ì´ ì—†ìŠµë‹ˆë‹¤. ì²« ì£¼ì¸ê³µì´ ë˜ì–´ë³´ì„¸ìš”! ğŸ…</p>
        </section>

        <p id="volunteer-title-text">ìì›ë´‰ì‚¬ ì´ì•¼ê¸°</p>
        <div id="mainContent">
          <swiper-container
            class="mySwiper"
            slides-per-view="3"
            centered-slides="false"
            space-between="20"
            pagination="true"
            pagination-type="fraction"
            navigation="true"
            autoplay-delay="2000"
            autoplay-disable-on-interaction="false"
            loop="true"
          >
            <th:block th:each="board : ${boardList}">
              <swiper-slide>
                <div class="swiper-content">
                  <a
                    th:href="@{/board/{boardCode}/{boardNo}(boardCode=${board.boardCode}, boardNo=${board.boardNo})}"
                  >
                    <img
                      th:src="${board.imgRename != null 
                      ? board.imgPath + board.imgRename 
                      : '/images/mainLogo.jpg'}"
                      alt="ë°°ê²½"
                      class="bg"
                    />
                  </a>
                </div>
                <div class="text-info">
                  <p th:text="|${board.memberNickname} ë‹˜|"></p>
                  <a
                    th:href="@{/board/{boardCode}/{boardNo}(boardCode=${board.boardCode}, boardNo = ${board.boardNo})}"
                    th:text="${board.boardTitle}"
                    id="volun-title"
                  ></a>
                </div>
              </swiper-slide>
            </th:block>
          </swiper-container>
        </div>
      </div>
    </div>
    <th:block th:replace="~{common/footer}"></th:block>
    <script src="https://cdn.jsdelivr.net/npm/swiper@12/swiper-element-bundle.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/swiper@12/swiper-element-bundle.min.js"></script>

    <script>
      // 1. ìŠ¤ì™€ì´í¼ ì»¨í…Œì´ë„ˆê°€ ìˆëŠ”ì§€ ë¨¼ì € í™•ì¸
      const swiperEl = document.querySelector("swiper-container");

      // swiperElì´ ì¡´ì¬í•  ë•Œë§Œ ë‚´ë¶€ ë¡œì§ ì‹¤í–‰
      if (swiperEl) {
        // 2. ìŠ¤ì™€ì´í¼ ê°ì²´ ì°¸ì¡° (ê°ì²´ê°€ ìƒì„±ë  ë•Œê¹Œì§€ ì ì‹œ ê¸°ë‹¤ë ¤ì•¼ í•  ìˆ˜ë„ ìˆìŒ)
        const swiper = swiperEl.swiper;

        let appendNumber = 4;
        let prependNumber = 1;

        // 3. ê° ë²„íŠ¼ ì¡´ì¬ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ë©° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡

        // ë‘ ê°œ ì•ì— ì¶”ê°€ ë²„íŠ¼
        document
          .querySelector(".prepend-2-slides")
          ?.addEventListener("click", function (e) {
            e.preventDefault();
            swiper.prependSlide([
              "<swiper-slide>Slide " + --prependNumber + "</swiper-slide>",
              "<swiper-slide>Slide " + --prependNumber + "</swiper-slide>",
            ]);
          });

        // í•œ ê°œ ì•ì— ì¶”ê°€ ë²„íŠ¼
        document
          .querySelector(".prepend-slide")
          ?.addEventListener("click", function (e) {
            e.preventDefault();
            swiper.prependSlide(
              "<swiper-slide>Slide " + --prependNumber + "</swiper-slide>"
            );
          });

        // í•œ ê°œ ë’¤ì— ì¶”ê°€ ë²„íŠ¼
        document
          .querySelector(".append-slide")
          ?.addEventListener("click", function (e) {
            e.preventDefault();
            swiper.appendSlide(
              "<swiper-slide>Slide " + ++appendNumber + "</swiper-slide>"
            );
          });

        // ë‘ ê°œ ë’¤ì— ì¶”ê°€ ë²„íŠ¼
        document
          .querySelector(".append-2-slides")
          ?.addEventListener("click", function (e) {
            e.preventDefault();
            swiper.appendSlide([
              "<swiper-slide>Slide " + ++appendNumber + "</swiper-slide>",
              "<swiper-slide>Slide " + ++appendNumber + "</swiper-slide>",
            ]);
          });
      }
    </script>
  </body>
</html>
