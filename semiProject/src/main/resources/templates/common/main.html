<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="/css/common/main.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.css"
    />
    <style>
      html,
      body {
        position: relative;
        height: 100%;
      }

      swiper-container {
        width: 100%;
        height: 100%;
      }

      swiper-slide {
        /* text-align: center;
        font-size: 18px;
        display: flex;
        justify-content: center;
        align-items: center; */
        border-radius: 20px;
        border: 1px solid #ddd;
        background-color: white;
        box-shadow: 0px 8px 6px -6px #666;
      }

      swiper-container {
        width: 100%;
        height: 400px;
        margin: 20px auto;
      }

      .append-buttons {
        text-align: center;
        margin-top: 20px;
      }

      .append-buttons button {
        display: inline-block;
        cursor: pointer;
        border: 1px solid #007aff;
        color: #007aff;
        text-decoration: none;
        padding: 4px 10px;
        border-radius: 4px;
        margin: 0 10px;
        font-size: 13px;
      }
      .swiper-content {
        display: flex;
        flex-direction: column;
      }
      .bg {
        width: 100%;
        height: 250px;
        border-top-left-radius: 20px;
        border-top-right-radius: 20px;
      }
      .text-info {
        padding: 0px 20px;
      }
      #volunteer-title-text {
        font-size: 25px;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <th:block th:replace="~{common/header}"></th:block>
    <div id="container">
      <img src="images/mainLogo.jpg" alt="메인로고" id="mainLogoImg" />
      <div>
        <p id="volunteer-title-text">자원봉사 이야기</p>
        <div id="mainContent">
          <swiper-container
            class="mySwiper"
            slides-per-view="3"
            centered-slides="true"
            space-between="30"
            pagination="true"
            pagination-type="fraction"
            navigation="true"
          >
            <th:block th:each="board : ${boardList}">
              <swiper-slide>
                <div class="swiper-content">
                  <a
                    th:href="@{/board/{boardCode}/{boardNo}(boardCode=${board.boardCode}, boardNo=${board.boardNo})}"
                  >
                    <img
                      th:src="${board.imgRename != null 
                      ? board.imgPath + board.imgRename 
                      : '/images/mainLogo.jpg'}"
                      alt="배경"
                      class="bg"
                    />
                  </a>
                </div>
                <div class="text-info">
                  <p th:text="|${board.memberNickname} 님|"></p>
                  <a
                    th:href="@{/board/{boardCode}/{boardNo}(boardCode=${board.boardCode}, boardNo = ${board.boardNo})}"
                    th:text="${board.boardTitle}"
                    id="volun-title"
                  ></a>
                </div>
              </swiper-slide>
            </th:block>
          </swiper-container>
        </div>
      </div>
    </div>
    <th:block th:replace="~{common/footer}"></th:block>
    <script src="https://cdn.jsdelivr.net/npm/swiper@12/swiper-element-bundle.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/swiper@12/swiper-element-bundle.min.js"></script>

    <script>
      // 1. 스와이퍼 컨테이너가 있는지 먼저 확인
      const swiperEl = document.querySelector("swiper-container");

      // swiperEl이 존재할 때만 내부 로직 실행
      if (swiperEl) {
        // 2. 스와이퍼 객체 참조 (객체가 생성될 때까지 잠시 기다려야 할 수도 있음)
        const swiper = swiperEl.swiper;

        let appendNumber = 4;
        let prependNumber = 1;

        // 3. 각 버튼 존재 여부를 확인하며 이벤트 리스너 등록

        // 두 개 앞에 추가 버튼
        document
          .querySelector(".prepend-2-slides")
          ?.addEventListener("click", function (e) {
            e.preventDefault();
            swiper.prependSlide([
              "<swiper-slide>Slide " + --prependNumber + "</swiper-slide>",
              "<swiper-slide>Slide " + --prependNumber + "</swiper-slide>",
            ]);
          });

        // 한 개 앞에 추가 버튼
        document
          .querySelector(".prepend-slide")
          ?.addEventListener("click", function (e) {
            e.preventDefault();
            swiper.prependSlide(
              "<swiper-slide>Slide " + --prependNumber + "</swiper-slide>"
            );
          });

        // 한 개 뒤에 추가 버튼
        document
          .querySelector(".append-slide")
          ?.addEventListener("click", function (e) {
            e.preventDefault();
            swiper.appendSlide(
              "<swiper-slide>Slide " + ++appendNumber + "</swiper-slide>"
            );
          });

        // 두 개 뒤에 추가 버튼
        document
          .querySelector(".append-2-slides")
          ?.addEventListener("click", function (e) {
            e.preventDefault();
            swiper.appendSlide([
              "<swiper-slide>Slide " + ++appendNumber + "</swiper-slide>",
              "<swiper-slide>Slide " + ++appendNumber + "</swiper-slide>",
            ]);
          });
      }
    </script>
  </body>
</html>
