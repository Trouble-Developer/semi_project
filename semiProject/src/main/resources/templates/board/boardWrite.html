<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="/css/common/common.css" />
    <link rel="stylesheet" href="/css/board/boardWrite.css" />
    <link
      href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/summernote@0.9.0/dist/summernote.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/summernote@0.9.0/dist/summernote.min.js"></script>
  </head>
  <body>
    <th:block th:replace="~{common/header}"></th:block>
    <div id="container">
      <div id="title">
        <th:block th:each="board : ${application.boardTypeList}">
          <p
            id="title-text"
            th:if="${board.boardCode == boardCode}"
            th:text="${board.boardName}"
          >
            게시판 유형
          </p>
        </th:block>
      </div>
      <form
        method="post"
        th:action="@{/editBoard/{boardCode}/insert(boardCode=${boardCode})}"
        id="summernote-write"
      >
        <div id="board-write">
          <div id="board-info">
            <select name="boardType" id="board-type">
              <option
                value="1"
                th:text="'자유 게시판'"
                th:selected="${boardCode == 1}"
              >
                자유 게시판
              </option>
              <!-- 정보 게시판 -->
              <option
                value="3"
                th:text="'봉사후기'"
                th:selected="${boardCode == 3}"
              >
                봉사후기
              </option>
              <option
                value="4"
                th:if="${session.loginMember?.authority == 2}"
                th:text="'공지사항'"
                th:selected="${boardCode == 4}"
              >
                공지사항
              </option>
              <option
                value="5"
                th:text="'고객지원'"
                th:selected="${boardCode == 5}"
              >
                고객지원
              </option>
            </select>
            <div id="board-info-text">
              <input
                type="text"
                id="board-title"
                placeholder="제목을 입력해주세요."
                name="title"
              />
              <div>
                <input type="checkbox" id="checkbox" name="checkbox" />
                <label id="secret-check" for="checkbox">비밀글</label>
              </div>
            </div>
          </div>
        </div>
        <div id="board-write-info">
          <textarea id="summernote" name="editordata"></textarea>
          <button id="write-btn">등록하기</button>
        </div>
      </form>
    </div>
    <th:block th:replace="~{common/footer}"></th:block>
    <!--  summernote -->
    <script>
      $(document).ready(function () {
        $("#summernote").summernote({
          width: 1130,
          height: 300,
          lang: "ko-KR",
          focus: true,
          toolbar: [
            ["fontname", ["fontname"]],
            ["fontsize", ["fontsize"]],
            [
              "style",
              ["bold", "italic", "underline", "strikethrough", "clear"],
            ],
            ["color", ["forecolor", "color"]],
            ["table", ["table"]],
            ["para", ["ul", "ol", "paragraph"]],
            ["height", ["height"]],
            ["insert", ["picture", "link", "video"]],
            ["view", ["codeview", "fullscreen", "help"]],
          ],
          fontNames: [
            "Arial",
            "Arial Black",
            "Comic Sans MS",
            "Courier New",
            "맑은 고딕",
            "궁서",
            "굴림체",
            "굴림",
            "돋음체",
            "바탕체",
          ],
          fontSizes: [
            "8",
            "9",
            "10",
            "11",
            "12",
            "14",
            "16",
            "18",
            "20",
            "22",
            "24",
            "28",
            "30",
            "36",
            "50",
            "72",
          ],
          callbacks: {
            onImageUpload: function (files) {
              for (let i = 0; i < files.length; i++) {
                uploadImage(files[i]);
              }
            },
          },
        });
      });
      function uploadImage(file) {
        const formData = new FormData();
        formData.append("file", file);

        $.ajax({
          url: "/editBoard/image/upload",
          type: "POST",
          data: formData,
          contentType: false,
          processData: false,
          success: function (res) {
            $("#summernote").summernote("insertImage", res.url);
          },
        });
      }
    </script>

    <script src="/js/board/boardWrite.js"></script>
  </body>
</html>
